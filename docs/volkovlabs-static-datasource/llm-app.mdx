---
tags:
  - Business Input Data Source
  - LLM App and OpenAI
---

import Image from "@theme/Image";

# LLM App and OpenAI

The Business Input Data Source supports using LLM App and OpenAI.

Add LLM APP plugin and set up `OpenAI API Key` with `OpenAI API Organization ID`

<Image
  title="LLM APP plugin for grafana"
  src="/img/plugins/volkovlabs-static-datasource/llm-app.png"
/>

After that, a message box will appear in `Code` editor mode in Business Input Data Source.
Message box allows you to use the response that will be received from the LLM App together with OpenAI.
The answer is contained in `context.llmResult`

<Image
  title="Message Example LLM App"
  src="/img/plugins/volkovlabs-static-datasource/llm-app-message-box.png"
/>

## Example with BTC price

Message example

```js
Please return JSON with 2 arrays: datetime and price which contain BTC price
from ${**from:date} to ${**to:date} for every hour
```

JS code editor example

```js
console.log("result", context.llmResult);

const content = context.llmResult?.choices?.[0]?.message?.content;
let data = {};

try {
  data = JSON.parse(content);
} catch (e) {
  console.error("Unable to parse result", e);
}

console.log("parsedData", data);

const result = {
  ...frame,
  fields: frame.fields.map((field) => ({
    ...field,
    values: field.name === "date" ? data.datetime || [] : data.price || [],
  })),
};

return Promise.resolve(result);
```

Result of request

<Image
  title="Message Example LLM App"
  src="/img/plugins/volkovlabs-static-datasource/llm-result.png"
/>
