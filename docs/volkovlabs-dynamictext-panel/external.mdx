---
tags:
  - Dynamic Text
  - Events
image: /img/plugins/volkovlabs-dynamictext-panel/external.png
---

import Code from "@theme/Code";
import Image from "@theme/Image";
import Video from "@theme/Video";

# External JS and CSS

:::info Version

The external resources are supported by the Dynamic Text panel starting from version 4.1.0.

:::

The dynamic text panel allows the loading of additional JavaScript and CSS Resources using external URLs like CDN (Content Delivery Network).

You can store CSS/JS files on your Grafana instance, in the public folder to prevent loading 3rd party URLs.

<Image
  title="Loading Google Material CSS and JS files from external resource."
  src="/img/plugins/volkovlabs-dynamictext-panel/external.png"
  lazy={false}
/>

## Sanitizing

Sanitizing configuration should be disabled to see External Resources in the Panel Options.

## JavaScript Code

External CSS/JS files can be used to include additional visual elements, and JavaScript functions to execute from the [JavaScript Code](/plugins/volkovlabs-dynamictext-panel/code) editor.

## Plotly 3D Scatter

It's possible to visualize Plotly 3D Scatter by loading the external JS library `https://cdn.plot.ly/plotly-2.24.1.min.js` and adding a JavaScript Code.

Thanks to community member [yosiasz](https://github.com/yosiasz) for the solution.

<Image
  title="Loading Plotly library and adding content with javascript code."
  src="/img/plugins/volkovlabs-dynamictext-panel/external-plotly.png"
  lazy={false}
  width="60%"
/>

Grafana's Edit Mode may prevent displaying the Plotly chart in the Edit Mode. Save and check the result on the dashboard.

### Content

```html
<body>
  <div id="addisAbeba">
    <!-- Plotly chart will be drawn inside this DIV -->
  </div>
</body>
```

<Image
  title="3D Scatter visualized using Plotly external JavaScript library."
  src="/img/plugins/volkovlabs-dynamictext-panel/plotly.png"
  lazy={false}
  width="60%"
/>

### JavaScript Code

```js
(async () => {
  let url =
    "https://raw.githubusercontent.com/plotly/datasets/master/3d-scatter.csv";

  let fetchData = await fetch(url);
  let csvData = await fetchData.text();
  let rows = csvToJson(csvData);

  var trace1 = {
    x: unpack(rows, "x1"),
    y: unpack(rows, "y1"),
    z: unpack(rows, "z1"),
    mode: "markers",
    marker: {
      size: 12,
      line: {
        color: "rgba(217, 217, 217, 0.14)",
        width: 0.5,
      },
      opacity: 0.8,
    },
    type: "scatter3d",
  };

  var trace2 = {
    x: unpack(rows, "x2"),
    y: unpack(rows, "y2"),
    z: unpack(rows, "z2"),
    mode: "markers",
    marker: {
      color: "rgb(127, 127, 127)",
      size: 12,
      symbol: "circle",
      line: {
        color: "rgb(204, 204, 204)",
        width: 1,
      },
      opacity: 0.8,
    },
    type: "scatter3d",
  };

  var data = [trace1, trace2];

  var layout = {
    margin: {
      l: 0,
      r: 0,
      b: 0,
      t: 0,
    },
  };
  Plotly.newPlot("addisAbeba", data, layout);
})();

const unpack = (rows, key) => {
  return rows.map(function (row) {
    return row[key];
  });
};

const csvToJson = (data, delimiter = ",") => {
  const titles = data.slice(0, data.indexOf("\r\n")).split(delimiter);
  return data
    .slice(data.indexOf("\n") + 1)
    .split("\r\n")
    .map((v) => {
      const values = v.split(delimiter);
      return titles.reduce(
        (obj, title, index) => ((obj[title] = values[index]), obj),
        {}
      );
    });
};
```
