{"openapi":"3.0.0","paths":{"/license":{"get":{"operationId":"LicenseController_getLicenseInfo","summary":"Get license info","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseInfo"}}}},"403":{"description":"","content":{"application/json":{"schema":{"default":{"message":"License verification failed","code":"licenseVerificationFailed"},"type":"#/components/schemas/ErrorResult"}}}},"404":{"description":"","content":{"application/json":{"schema":{"default":{"message":"No license","code":"noLicense"},"type":"#/components/schemas/ErrorResult"}}}},"500":{"description":"","content":{"application/json":{"schema":{"default":{"message":"Internal Server Error","code":"unknown"},"type":"#/components/schemas/ErrorResult"}}}}},"tags":["License"],"security":[{"Authorization":[]}]}},"/health":{"get":{"operationId":"HealthController_ping","summary":"Health check","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"default":{"message":"pong"}}}}},"403":{"description":"","content":{"application/json":{"schema":{"default":{"message":"License verification failed","code":"licenseVerificationFailed"},"type":"#/components/schemas/ErrorResult"}}}},"500":{"description":"","content":{"application/json":{"schema":{"default":{"message":"Internal Server Error","code":"unknown"},"type":"#/components/schemas/ErrorResult"}}}}},"tags":["Health"],"security":[{"Authorization":[]}]}},"/alerts":{"get":{"operationId":"AlertsController_getAll","summary":"Get all alert rules","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ResponseAlert"}}}}},"403":{"description":"","content":{"application/json":{"schema":{"default":{"message":"License verification failed","code":"licenseVerificationFailed"},"type":"#/components/schemas/ErrorResult"}}}},"500":{"description":"","content":{"application/json":{"schema":{"default":{"message":"Internal Server Error","code":"unknown"},"type":"#/components/schemas/ErrorResult"}}}}},"tags":["Alert Rules"],"security":[{"Authorization":[]}]},"post":{"operationId":"AlertsController_create","summary":"Create alert rule","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlertDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseAlert"}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"default":{"message":["property queryId should not exist"]},"type":"#/components/schemas/ValidationError"}}}},"403":{"description":"","content":{"application/json":{"schema":{"default":{"message":"License verification failed","code":"licenseVerificationFailed"},"type":"#/components/schemas/ErrorResult"}}}},"500":{"description":"","content":{"application/json":{"schema":{"default":{"message":"Internal Server Error","code":"unknown"},"type":"#/components/schemas/ErrorResult"}}}}},"tags":["Alert Rules"],"security":[{"Authorization":[]}]}},"/alerts/{id}":{"put":{"operationId":"AlertsController_update","summary":"Update alert rule","parameters":[{"name":"id","required":true,"in":"path","schema":{}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlertDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseAlert"}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"default":{"message":["property queryId should not exist"]},"type":"#/components/schemas/ValidationError"}}}},"403":{"description":"","content":{"application/json":{"schema":{"default":{"message":"License verification failed","code":"licenseVerificationFailed"},"type":"#/components/schemas/ErrorResult"}}}},"404":{"description":"","content":{"application/json":{"schema":{"default":{"message":"Alert Rule does not exist","code":"alertRuleNotFound"},"type":"#/components/schemas/ErrorResult"}}}},"500":{"description":"","content":{"application/json":{"schema":{"default":{"message":"Internal Server Error","code":"unknown"},"type":"#/components/schemas/ErrorResult"}}}}},"tags":["Alert Rules"],"security":[{"Authorization":[]}]},"delete":{"operationId":"AlertsController_delete","summary":"Delete alert rule","parameters":[{"name":"id","required":true,"in":"path","schema":{}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"boolean"}}}},"403":{"description":"","content":{"application/json":{"schema":{"default":{"message":"License verification failed","code":"licenseVerificationFailed"},"type":"#/components/schemas/ErrorResult"}}}},"404":{"description":"","content":{"application/json":{"schema":{"default":{"message":"Alert Rule does not exist","code":"alertRuleNotFound"},"type":"#/components/schemas/ErrorResult"}}}},"500":{"description":"","content":{"application/json":{"schema":{"default":{"message":"Internal Server Error","code":"unknown"},"type":"#/components/schemas/ErrorResult"}}}}},"tags":["Alert Rules"],"security":[{"Authorization":[]}]}},"/alerts/{id}/status":{"put":{"operationId":"AlertsController_updateStatus","summary":"Update alert rule status","parameters":[{"name":"id","required":true,"in":"path","schema":{}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlertChangeStatusDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseAlert"}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"default":{"message":["property queryId should not exist"]},"type":"#/components/schemas/ValidationError"}}}},"403":{"description":"","content":{"application/json":{"schema":{"default":{"message":"License verification failed","code":"licenseVerificationFailed"},"type":"#/components/schemas/ErrorResult"}}}},"404":{"description":"","content":{"application/json":{"schema":{"default":{"message":"Alert Rule does not exist","code":"alertRuleNotFound"},"type":"#/components/schemas/ErrorResult"}}}},"500":{"description":"","content":{"application/json":{"schema":{"default":{"message":"Internal Server Error","code":"unknown"},"type":"#/components/schemas/ErrorResult"}}}}},"tags":["Alert Rules"],"security":[{"Authorization":[]}]}},"/alerts/{id}/history/last":{"get":{"operationId":"AlertsController_getLastAlertHistory","summary":"Get last history event for alert rule","parameters":[{"name":"id","required":true,"in":"path","schema":{}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseAlertHistory"}}}},"403":{"description":"","content":{"application/json":{"schema":{"default":{"message":"License verification failed","code":"licenseVerificationFailed"},"type":"#/components/schemas/ErrorResult"}}}},"404":{"description":"","content":{"application/json":{"schema":{"default":{"message":"Alert Rule does not exist","code":"alertRuleNotFound"},"type":"#/components/schemas/ErrorResult"}}}},"500":{"description":"","content":{"application/json":{"schema":{"default":{"message":"Internal Server Error","code":"unknown"},"type":"#/components/schemas/ErrorResult"}}}}},"tags":["Alert Rules"],"security":[{"Authorization":[]}]}},"/alerts/history":{"get":{"operationId":"AlertsController_getAllHistory","summary":"Get all history events","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ResponseAlertHistory"}}}}},"403":{"description":"","content":{"application/json":{"schema":{"default":{"message":"License verification failed","code":"licenseVerificationFailed"},"type":"#/components/schemas/ErrorResult"}}}},"500":{"description":"","content":{"application/json":{"schema":{"default":{"message":"Internal Server Error","code":"unknown"},"type":"#/components/schemas/ErrorResult"}}}}},"tags":["Alert Rules"],"security":[{"Authorization":[]}]}},"/grafana/variables/load":{"post":{"operationId":"GrafanaVariablesController_loadDashboardVariables","summary":"Get dashboard variables","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GrafanaVariablesCalculateDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DashboardVariableOptionsResponse"}}}},"400":{"description":"","content":{"application/json":{"schema":{"default":{"message":"Dashboard \"[id]\" does not exist.","code":"alertRuleNotFound"},"type":"#/components/schemas/ErrorResult"}}}},"403":{"description":"","content":{"application/json":{"schema":{"default":{"message":"License verification failed","code":"licenseVerificationFailed"},"type":"#/components/schemas/ErrorResult"}}}},"500":{"description":"","content":{"application/json":{"schema":{"default":{"message":"Internal Server Error","code":"unknown"},"type":"#/components/schemas/ErrorResult"}}}}},"tags":["Grafana Variables"],"security":[{"Authorization":[]}]}},"/grafana/search":{"get":{"operationId":"GrafanaDataController_searchDashboards","summary":"Search dashboards","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"type":"object"}}}}},"403":{"description":"","content":{"application/json":{"schema":{"default":{"message":"License verification failed","code":"licenseVerificationFailed"},"type":"#/components/schemas/ErrorResult"}}}},"500":{"description":"","content":{"application/json":{"schema":{"default":{"message":"Internal Server Error","code":"unknown"},"type":"#/components/schemas/ErrorResult"}}}}},"tags":["Grafana Proxy"],"security":[{"Authorization":[]}]}},"/grafana/dashboards/uid/{id}":{"get":{"operationId":"GrafanaDataController_getDashboardInfo","summary":"Get dashboard by uid","parameters":[{"name":"id","required":true,"in":"path","schema":{}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}},"403":{"description":"","content":{"application/json":{"schema":{"default":{"message":"License verification failed","code":"licenseVerificationFailed"},"type":"#/components/schemas/ErrorResult"}}}},"500":{"description":"","content":{"application/json":{"schema":{"default":{"message":"Internal Server Error","code":"unknown"},"type":"#/components/schemas/ErrorResult"}}}}},"tags":["Grafana Proxy"],"security":[{"Authorization":[]}]}},"/grafana/org/users":{"get":{"operationId":"GrafanaDataController_getUsers","summary":"Get all users within the current organization.","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"type":"object"}}}}},"403":{"description":"","content":{"application/json":{"schema":{"default":{"message":"License verification failed","code":"licenseVerificationFailed"},"type":"#/components/schemas/ErrorResult"}}}},"500":{"description":"","content":{"application/json":{"schema":{"default":{"message":"Internal Server Error","code":"unknown"},"type":"#/components/schemas/ErrorResult"}}}}},"tags":["Grafana Proxy"],"security":[{"Authorization":[]}]}},"/webhooks":{"get":{"operationId":"WebhooksController_getAll","summary":"Get all actions","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ResponseWebhook"}}}}},"403":{"description":"","content":{"application/json":{"schema":{"default":{"message":"License verification failed","code":"licenseVerificationFailed"},"type":"#/components/schemas/ErrorResult"}}}},"500":{"description":"","content":{"application/json":{"schema":{"default":{"message":"Internal Server Error","code":"unknown"},"type":"#/components/schemas/ErrorResult"}}}}},"tags":["Webhooks"],"security":[{"Authorization":[]}]},"post":{"operationId":"WebhooksController_create","summary":"Create action","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseWebhook"}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"default":{"message":["property queryId should not exist"]},"type":"#/components/schemas/ValidationError"}}}},"403":{"description":"","content":{"application/json":{"schema":{"default":{"message":"License verification failed","code":"licenseVerificationFailed"},"type":"#/components/schemas/ErrorResult"}}}},"500":{"description":"","content":{"application/json":{"schema":{"default":{"message":"Internal Server Error","code":"unknown"},"type":"#/components/schemas/ErrorResult"}}}}},"tags":["Webhooks"],"security":[{"Authorization":[]}]}},"/webhooks/default":{"get":{"operationId":"WebhooksController_getDefault","summary":"Get default action","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseWebhook"}}}},"403":{"description":"","content":{"application/json":{"schema":{"default":{"message":"License verification failed","code":"licenseVerificationFailed"},"type":"#/components/schemas/ErrorResult"}}}},"404":{"description":"","content":{"application/json":{"schema":{"default":{"message":"Default webhook does not exist","code":"defaultActionNotFound"},"type":"#/components/schemas/ErrorResult"}}}},"500":{"description":"","content":{"application/json":{"schema":{"default":{"message":"Internal Server Error","code":"unknown"},"type":"#/components/schemas/ErrorResult"}}}}},"tags":["Webhooks"],"security":[{"Authorization":[]}]}},"/webhooks/{id}":{"put":{"operationId":"WebhooksController_update","summary":"Update action","parameters":[{"name":"id","required":true,"in":"path","schema":{}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseWebhook"}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"default":{"message":["property queryId should not exist"]},"type":"#/components/schemas/ValidationError"}}}},"403":{"description":"","content":{"application/json":{"schema":{"default":{"message":"License verification failed","code":"licenseVerificationFailed"},"type":"#/components/schemas/ErrorResult"}}}},"500":{"description":"","content":{"application/json":{"schema":{"default":{"message":"Internal Server Error","code":"unknown"},"type":"#/components/schemas/ErrorResult"}}}}},"tags":["Webhooks"],"security":[{"Authorization":[]}]},"delete":{"operationId":"WebhooksController_delete","summary":"Delete action","parameters":[{"name":"id","required":true,"in":"path","schema":{}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"boolean"}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"default":{"message":["property queryId should not exist"]},"type":"#/components/schemas/ValidationError"}}}},"403":{"description":"","content":{"application/json":{"schema":{"default":{"message":"License verification failed","code":"licenseVerificationFailed"},"type":"#/components/schemas/ErrorResult"}}}},"500":{"description":"","content":{"application/json":{"schema":{"default":{"message":"Internal Server Error","code":"unknown"},"type":"#/components/schemas/ErrorResult"}}}}},"tags":["Webhooks"],"security":[{"Authorization":[]}]}},"/webhooks/test":{"post":{"operationId":"WebhooksController_test","summary":"Test action","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookTestResult"}}}},"403":{"description":"","content":{"application/json":{"schema":{"default":{"message":"License verification failed","code":"licenseVerificationFailed"},"type":"#/components/schemas/ErrorResult"}}}},"500":{"description":"","content":{"application/json":{"schema":{"default":{"message":"Internal Server Error","code":"unknown"},"type":"#/components/schemas/ErrorResult"}}}},"502":{"description":"","content":{"application/json":{"schema":{"default":{"ok":false,"message":"Error details"}}}}}},"tags":["Webhooks"],"security":[{"Authorization":[]}]}},"/metrics":{"get":{"operationId":"MetricsController_index","summary":"Get prometheus metrics","parameters":[],"responses":{"200":{"description":"Prometheus metrics","content":{"application/json":{"schema":{"type":"string"}}}}},"tags":["Prometheus Metrics"]}}},"info":{"title":"Engine HTTP API","description":"","version":"1.7.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"Authorization":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"LicenseInfo":{"type":"object","properties":{"limit":{"type":"number"},"used":{"type":"number"},"expiration":{"type":"number","description":"Timestamp ms"}},"required":["limit","used","expiration"]},"AlertEvaluationPatternDto":{"type":"object","properties":{"field":{"type":"string"},"pattern":{"type":"string"},"type":{"type":"string","enum":["pattern"]}},"required":["field","pattern","type"]},"AlertEvaluationThresholdsDto":{"type":"object","properties":{"type":{"type":"string","enum":["thresholds"]},"colors":{"type":"array","items":{"type":"string"}}},"required":["type","colors"]},"AlertEvaluationAnomalyDto":{"type":"object","properties":{"type":{"type":"string","enum":["anomaly"]}},"required":["type"]},"AlertCondition":{"type":"object","properties":{"id":{"type":"string"},"repeat":{"type":"string","nullable":true},"type":{"type":"string","enum":["item"]},"variables":{"type":"object","additionalProperties":{"oneOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]}},"evaluation":{"oneOf":[{"$ref":"#/components/schemas/AlertEvaluationPatternDto"},{"$ref":"#/components/schemas/AlertEvaluationThresholdsDto"},{"$ref":"#/components/schemas/AlertEvaluationAnomalyDto"}]}},"required":["id","repeat","type"]},"AlertVariable":{"type":"object","properties":{"name":{"type":"string"},"multi":{"type":"boolean"},"includeAll":{"type":"boolean"},"value":{"oneOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]}},"required":["name","multi","value"]},"AlertGlobalCondition":{"type":"object","properties":{"id":{"type":"string"},"repeat":{"type":"string","nullable":true},"type":{"type":"string","enum":["global"]},"variables":{"type":"object","additionalProperties":{"$ref":"#/components/schemas/AlertVariable"}},"evaluationType":{"type":"string","enum":["anomaly","pattern","thresholds"]},"evaluation":{"oneOf":[{"$ref":"#/components/schemas/AlertEvaluationPatternDto"},{"$ref":"#/components/schemas/AlertEvaluationThresholdsDto"},{"$ref":"#/components/schemas/AlertEvaluationAnomalyDto"}]}},"required":["id","repeat","type","evaluationType","evaluation"]},"AlertTimeRange":{"type":"object","properties":{"from":{"type":"number","description":"Time Offset in seconds"},"to":{"type":"number","description":"Time Offset in seconds"}},"required":["from","to"]},"ResponseAlert":{"type":"object","properties":{"status":{"type":"string","enum":["active","paused"]},"title":{"type":"string"},"dashboardId":{"type":"string"},"panelId":{"type":"number"},"schedule":{"type":"string"},"webhookIds":{"type":"array","items":{"type":"string"}},"annotations":{"type":"string","enum":["panel","dashboard","disabled"]},"timeRangeSource":{"type":"string","enum":["dashboard","configured"]},"timeRange":{"$ref":"#/components/schemas/AlertTimeRange"},"conditions":{"discriminator":{"propertyName":"type","mapping":{"global":"#/components/schemas/AlertGlobalCondition","item":"#/components/schemas/AlertCondition"}},"type":"array","items":{"oneOf":[{"$ref":"#/components/schemas/AlertGlobalCondition"},{"$ref":"#/components/schemas/AlertCondition"}]}},"id":{"type":"string"},"stateStartDate":{"format":"date-time","type":"string","description":"State Start Date","nullable":true}},"required":["status","title","dashboardId","panelId","schedule","webhookIds","annotations","timeRangeSource","conditions","id","stateStartDate"]},"AlertDto":{"type":"object","properties":{"status":{"type":"string","enum":["active","paused"]},"title":{"type":"string"},"dashboardId":{"type":"string"},"panelId":{"type":"number"},"schedule":{"type":"string"},"webhookIds":{"type":"array","items":{"type":"string"}},"annotations":{"type":"string","enum":["panel","dashboard","disabled"]},"timeRangeSource":{"type":"string","enum":["dashboard","configured"]},"timeRange":{"$ref":"#/components/schemas/AlertTimeRange"},"conditions":{"discriminator":{"propertyName":"type","mapping":{"global":"#/components/schemas/AlertGlobalCondition","item":"#/components/schemas/AlertCondition"}},"type":"array","items":{"oneOf":[{"$ref":"#/components/schemas/AlertGlobalCondition"},{"$ref":"#/components/schemas/AlertCondition"}]}}},"required":["status","title","dashboardId","panelId","schedule","webhookIds","annotations","timeRangeSource","conditions"]},"AlertChangeStatusDto":{"type":"object","properties":{"status":{"type":"string","enum":["active","paused"]}},"required":["status"]},"ResponseAlertHistory":{"type":"object","properties":{"id":{"type":"string"},"alertId":{"type":"string"},"startDate":{"format":"date-time","type":"string"},"endDate":{"format":"date-time","type":"string","nullable":true},"event":{"type":"string"},"prevState":{"type":"string","enum":["scheduled","ok","alerting","error","none"]},"newState":{"type":"string","enum":["scheduled","ok","alerting","error"]},"duration":{"type":"number"},"alertTitle":{"type":"string"}},"required":["id","alertId","startDate","endDate","event","prevState","newState","duration","alertTitle"]},"GrafanaVariablesCalculateTimeRangeDto":{"type":"object","properties":{"from":{"type":"number","description":"Timestamp in ms"},"to":{"type":"number","description":"Timestamp in ms"}},"required":["from","to"]},"GrafanaVariablesCalculateDto":{"type":"object","properties":{"dashboardId":{"type":"string"},"variables":{"type":"object","additionalProperties":{"oneOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]}},"timeRange":{"$ref":"#/components/schemas/GrafanaVariablesCalculateTimeRangeDto"}},"required":["dashboardId","variables"]},"AlertVariableOption":{"type":"object","properties":{"label":{"type":"string"},"value":{"type":"string"}},"required":["label","value"]},"DashboardVariableOptionsResponse":{"type":"object","properties":{"options":{"type":"object","additionalProperties":{"oneOf":[{"$ref":"#/components/schemas/AlertVariableOption"},{"type":"array","items":{"$ref":"#/components/schemas/AlertVariableOption"}}]}}},"required":["options"]},"WebhookRequestOptionsDto":{"type":"object","properties":{"url":{"type":"string"}},"required":["url"]},"WebhookCustomOptionsDto":{"type":"object","properties":{}},"ResponseWebhook":{"type":"object","properties":{"title":{"type":"string"},"type":{"type":"string","enum":["request","custom"]},"options":{"oneOf":[{"$ref":"#/components/schemas/WebhookRequestOptionsDto"},{"$ref":"#/components/schemas/WebhookCustomOptionsDto"}]},"isDefault":{"type":"boolean"},"id":{"type":"string"},"useFor":{"type":"array","items":{"type":"string"}},"useForByDefault":{"type":"array","items":{"type":"string"}}},"required":["title","type","options","id","useFor"]},"WebhookDto":{"type":"object","properties":{"title":{"type":"string"},"type":{"type":"string","enum":["request","custom"]},"options":{"oneOf":[{"$ref":"#/components/schemas/WebhookRequestOptionsDto"},{"$ref":"#/components/schemas/WebhookCustomOptionsDto"}]},"isDefault":{"type":"boolean"}},"required":["title","type","options"]},"WebhookTestResult":{"type":"object","properties":{"ok":{"type":"boolean"},"message":{"type":"string"}},"required":["ok","message"]}}}}