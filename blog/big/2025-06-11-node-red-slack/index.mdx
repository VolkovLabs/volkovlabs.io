---
authors: [mikhail, alex]
slug: node-red-slack/
tags: [Business Intelligence, Alerting, Grafana, Workflow, Automation]
image: /img/blog/2025-06-11-node-red-slack/banner.png
keywords:
  [Business Intelligence, Alerting, Grafana, Workflow, Automation, Image Render]
---

import Feedback from "@site/big/_feedback.mdx";
import Image from "@theme/Image";
import Youtube from "@theme/Youtube";

# Business Intelligence: Enhanced Alerting with Node-RED, Slack, and Image Render Microservice

At Volkov Labs, we are dedicated to advancing Business Intelligence (BI) workflows through innovative integrations and tools. In our latest release of the Business Intelligence platform (version 3.4.0), we’ve introduced the **Image Render microservice**, a powerful addition that supports **dashboard variables** from Grafana to generate dynamic visual content for alerts. Combined with **Node-RED** for workflow automation and **Slack** for team communication, this setup creates a seamless pipeline for real-time BI alerting.

In this blog post, we’ll explore how the Image Render microservice enhances BI by rendering panel screenshots and other visuals, and how it integrates with Node-RED to send customized Slack notifications—ensuring your team stays informed about critical business metrics and events.

## Business Intelligence with Grafana, Node-RED, and Slack

Business Intelligence thrives on actionable insights derived from data. The integration of Grafana, Node-RED, and Slack, powered by our [latest BI platform](/big/release/) features, offers a robust solution for monitoring, alerting, and collaboration:

- **Grafana**: A leading observability platform for visualizing data, Grafana enables dynamic dashboards using variables.
- **Business Intelligence paltform**: Allows to create alerts using dashboard variables to tailor notifications.
  - **Image Render Microservice (New in 3.4.0)**: A game-changer for Business Alerting, this microservice renders images ( Grafana panel screenshots) dynamically using dashboard variables, ensuring alerts are visually rich and context-specific.
- **Node-RED**: A low-code tool for automating workflows, perfect for connecting BI alerts to communication channels like Slack.
- **Slack**: A centralized hub for team communication, ideal for receiving real-time BI notifications and fostering collaboration.

This combination transforms raw BI data into actionable, visual notifications delivered directly to your team, bridging the gap between data analysis and decision-making.

<Image
  title="Slack Message with Rendered Image for High Latency in Business Engines."
  src="/img/blog/2025-06-11-node-red-slack/slack-message.png"
/>

## Introducing Image Render Microservice in BI Platform 3.4.0

The **Image Render microservice**, introduced in the 3.4.0 release of our Business Intelligence platform, is designed to elevate alerting by generating images dynamically. Leveraging **dashboard variables** from Grafana, it can render panel screenshots or other visual elements tailored to specific alert conditions or metrics.

<Image
  title="Notification History for alerting event displayed in Business Studio."
  src="/img/blog/2025-06-11-node-red-slack/event-notifications.png"
/>

This ensures that notifications are not just text-based but include critical visual context, making it easier for teams to assess and respond to BI events.

### Key Benefits for Business Intelligence

- **Dynamic Visuals**: Render images based on real-time data and dashboard variables, ensuring alerts reflect the exact state of your BI metrics.
- **Enhanced Context**: Include Grafana panel screenshots in alerts to provide a visual snapshot of issues like high latency or sales performance dips.
- **Seamless Integration**: Works effortlessly with Node-RED workflows to send rendered images to Slack and other platforms.

## Project Overview: Node-RED Workflow for BI Alerting

Our Node-RED flow is designed to process events from Business Intelligence platform, utilize the Image Render microservice for visual content, and send formatted notifications to Slack. The workflow handles two primary scenarios:

1. Sending text-only messages for quick BI updates.
2. Sending messages with images (e.g., rendered Grafana panel screenshots) for detailed context.

The flow supports incoming HTTP POST requests, processes payloads with dashboard variables, and includes error handling and debugging for reliability in BI environments.

<Image
  title="Node-RED Workflow for BI Alerting with Slack."
  src="/img/blog/2025-06-11-node-red-slack/workflow.png"
/>

### Key Features

- **HTTP Endpoint**: Listens for BI event notifications at `/slack`.
- **Payload Processing with Dashboard Variables**: Extracts channel ID, message text, and image data rendered using dashboard variables via the Image Render microservice.
- **Conditional Logic**: Routes the flow based on whether an image (e.g., a rendered screenshot) is included.
- **Slack API Integration**: Sends messages and images using Slack’s APIs (`chat.postMessage`, `files.getUploadURLExternal`, etc.).
- **Error Handling**: Ensures robustness with error-catching mechanisms.
- **Debugging**: Includes debug nodes for troubleshooting BI workflows.

## Node-RED Workflow Breakdown for BI Alerts

Let’s break down the Node-RED flow, focusing on how it integrates with the Image Render microservice to enhance BI alerting.

### Triggering the Flow

The flow begins with an **HTTP In** node (`Slack Trigger /slack`) that receives POST requests from Business Intelligence platform. These requests include event notification data, such as dashboard variables for channel ID, message text, and image references.

- **Input**: HTTP POST request with JSON payload.
- **Output**: Routes data to debug nodes (`Show Payload`, `Show Headers`) and a processing node (`Prepare Payload`).

<Image
  title="From Triggering the Flow to Check Image Switch."
  src="/img/blog/2025-06-11-node-red-slack/switch-workflow.png"
/>

### Preparing the Payload with Dashboard Variables

The **Prepare Payload** function node processes incoming BI alert data. It formats:

- Slack channel ID from request headers.
- Alert message text.
- Image data (if available), a Base64-encoded screenshot rendered by the Image Render microservice using dashboard variables.

```js
/**
 * Panel Screenshot via Image Render Microservice
 */
let image = msg.payload.event.condition?.panelScreenshot || "";
let title = msg.payload.event.alert?.title || "BI Metric Snapshot";

/**
 * Payload with Dashboard Variables
 */
msg.payload = {
  channel_id: msg.req.headers.channel_id,
  text: msg.payload.message,
  title,
  image,
};

return msg;
```

### Checking for Images and Routing

The **Check Image** switch node evaluates `msg.payload.image` to determine the flow path:

- **Image Present**: Routes to nodes for uploading the rendered image to Slack.
- **No Image**: Routes to nodes for sending a text-only BI notification.

### Sending Text Messages

For text-only BI alerts, the **Set Message** function node formats the payload for Slack’s `chat.postMessage` API, including the channel ID and message text.

The response is handled with appropriate HTTP status codes (200 for success, 400 for failure).

```js
/**
 * Payload for BI Text Alert
 */
msg.payload = {
  channel: msg.payload.channel_id,
  text: msg.payload.text,
};

return msg;
```

<Image
  title="Action Settings using Handlebars and Preview in Business Studio with Spanish language."
  src="/img/blog/2025-06-11-node-red-slack/action-settings.png"
/>

### Uploading Rendered Images to Slack

For alerts with images, the flow processes the rendered content (a Grafana panel screenshot) through several steps:

1. **Set Upload URL Payload**: Converts Base64-encoded image data to a Buffer, preparing metadata like filename and type.
2. **Get Upload URL**: Retrieves a temporary upload URL from Slack’s `files.getUploadURLExternal` API.
3. **Set Upload File Payload**: Formats the upload request.
4. **Upload File to URL**: Sends the image data to Slack.
5. **Complete Upload**: Finalizes the upload and shares the image in the Slack channel with a message.

<Image
  title="Uploading Rendered Images to Slack Workflow."
  src="/img/blog/2025-06-11-node-red-slack/upload-workflow.png"
/>

### Error Handling and Debugging

A **Catch** node (`Error Catch`) manages errors in the BI workflow, routing them to an error response node (`Error Response`) with a 400 status code. Debug nodes throughout the flow assist in monitoring payloads and API responses, ensuring smooth operation for BI alerting.

### Testing the Flow

Inject nodes (`Send Message`, `Send Image`) allow testing of text and image-based BI alerts without triggering real events, facilitating development and validation of the workflow.

## Setting Up the BI Alerting Integration

To implement this BI-focused workflow with the Image Render microservice, follow these steps:

1. **Install Node-RED**: Use our [Docker Compose configuration](https://github.com/VolkovLabs/business-intelligence/blob/main/docker-compose.yml) or the official [installation guide](https://nodered.org/docs/getting-started/).
2. **Import the Flow**: Import the JSON configuration from [`slack.json`](https://github.com/VolkovLabs/business-intelligence/blob/main/node-red/slack.json) into Node-RED.
3. **Configure Slack API Token**: Update HTTP Request nodes with your Slack Bot User OAuth Token.
4. **Set Up Image Render Microservice**: Ensure the BI platform 3.4.0 is installed and the Image Render microservice is configured.
5. **Configure Actions and Alerts**: Set up actions in the Business Engine to send alerts to the Node-RED `/slack` endpoint, including dashboard variables for dynamic rendering.
6. **Deploy and Test**: Deploy the flow and test using Inject nodes to verify text and image notifications in Slack.

<Image
  title="Set Grafana User Login and Password for Image Render microservice."
  src="/img/blog/2025-06-11-node-red-slack/grafana-environment.png"
/>

## Conclusion

With the release of version 3.4.0, our Business Intelligence platform introduces the **Image Render microservice**, a transformative tool for BI alerting. By leveraging **dashboard variables** from Grafana, it enables dynamic rendering of visual content like panel screenshots, enhancing the context of notifications. Combined with Node-RED for workflow automation and Slack for communication, this integration empowers teams to respond swiftly to critical BI events.

At Volkov Labs, we’re committed to evolving BI solutions that streamline data-driven decision-making. Stay tuned for more updates and tutorials on Business Intelligence, Grafana, and innovative integrations!

<Feedback />
