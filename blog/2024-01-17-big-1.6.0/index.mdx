---
authors: [daria]
slug: big-1.6.0-20240117/
tags: [Business Intelligence, Release Notes]
image: /img/blog/2024-01-17-big-1.6.0/banner.png
keywords: [Business Intelligence, Alerting, Grafana]
---

import Code from "@theme/Code";
import Image from "@theme/Image";
import Shorts from "@theme/Shorts";

# Business Intelligence App 1.6.0

We are excited to announce the release of the Business Intelligence App, version 1.6.0. It accumulates massive functionality enhancements and, thus, marks an important milestone in transitioning from a POC (proof of concept) to a development type of release.

The Business Intelligence App, version 1.6.0 includes the following updates:

- Allowed Variables support.
- Enabled Prometheus monitoring.
- Added Support for Prometheus data source.
- Extended UI functionality.
- Enabled high-availability (HA) setup.
- Added **Alert History** into the list of **Business Intelligence data source** request types.

## Variables Support

Supporting dashboard variables greatly simplifies work with configuring the alerting in general.

Let's say, you have two very similar devices and your task is to monitor their technical health by creating alerts in the event of an alert rule breach.

Your alert rules are almost identical for both devices with only thresholds being slightly different.

For instance, one device is allowed to rotate no faster than 50 rpm and the other device no more than 100 rpm.

Without dashboard variables, you have to create two separate alert rules. For a small number of devices, this approach is reasonable. However, it turns into a severe headache once instead of two devices you need to maintain hundreds. For every device, you will have to create and maintain a separate alert rule containing an identical query.

With dashboard variables enabled, creating one alert rule is enough. The thresholds could be configured in the **Overrides**.

## Enabled Prometheus Monitoring

In this release, we added a Prometheus middleware and container to allow the collection of the BI Engine system health statistics.

Having Prometheus monitoring built-in in the BI App allows you to monitor the alerting system itself. With that BI App is an answer to all inquiries about how Grafana itself could be monitored.

Being an outside system, the BI App is an excellent choice for observing the observability system while using the familiar interface.

### Prometheus dashboard

Following the enabling of the Prometheus monitoring, we crafted a ready-to-use, out-of-the-box dashboard with all necessary metrics for kick-off the successful monitoring.

<Image
  title="Built-in BI Engine monitoring dashboard. Data collected and stored via Prometheus."
  src="/img/blog/2024-01-17-big-1.6.0/prom.png"
/>

The BI Engine consists of two components:

- API Server (Variable **Instance** engine:3001)
- Scheduler (Variable **Instance** engine:3002)

<Image
  title="The BI App consists of two components:API Server and Scheduler."
  src="/img/blog/2024-01-17-big-1.6.0/bi-app.png"
/>

## Prometheus Data Source

At this stage, we ensured that the BI App supports the Prometheus Data Source. It also supports PostgreSQL and SQL data sources. We plan to add more in the future.

## Extended UI functionality

### Alerting panel

To align with the alerting basics terminology [Alert rule-Alert record-Alert action](/big/big-alerting/), we renamed the **Webhooks** tab into the **Action** tab. The illustration is below (the following section).

### Alert rule

In the Edit mode->**Action section**->**Add annotations** parameter, now you can specify whether you need to attach them to a panel or a dashboard (i.e. all panels of the specified dashboard).

<Image
  title="The Alerting panel and the Edit alert drawer."
  src="/img/blog/2024-01-17-big-1.6.0/alerting-panel.png"
/>

### Alert details

For the alert rules in the **Alerting** and **Error** statuses, we added the **Event Details** section.

To review, click the **Details** button on an alert card, then **Event Details** header.

<Image
  title="Event details for the alert rules in the Alerting and Error statuses."
  src="/img/blog/2024-01-17-big-1.6.0/event-details.png"
/>

## Alert History

We added a new option to the **Request** parameter of the Business Intelligence Engine data source.
It allows you to display alert history in a visualization panel of your choice. In the example below, the alert history is displayed in the Table visualization panel.

<Image
  title="New request type, Alerts History, allows to display."
  src="/img/blog/2024-01-17-big-1.6.0/alert-history.png"
/>

## High-availability (HA) setup

One of the most requested capabilities is the high-availability(HA) setup. We designed the BI App specifically keeping that in mind. Below you can find a high-level deployment (HA) schema.

All BI App system components could exist in clusters, where a cluster is a set of mirrored servers. It is done to primarily facilitate uninterrupted service by distributing the load most efficiently.

<Image
  title="High Availability Deployment."
  src="/img/blog/2024-01-17-big-1.6.0/high-availability.png"
/>

The below schema illustrates the same as HA schema, but every component is displayd only once. Also, the BI App is shown as one entity (not as API Server plus Scheduler as on the HA schema).

Prometheus serves to collect all system health-related and other data to ensure troubleshooting and reporting on system behavior.

<Image
  title="Conceptual workflow from the user POV."
  src="/img/blog/2024-01-17-big-1.6.0/workflow.png"
/>

## Getting Started

You can download the Development release from our [GitHub repository](https://github.com/volkovlabs/volkovlabs-bi-grafana).

### Docker Compose

The `docker-compose.yml` file consists of the following containers:

- **Grafana** includes the provisioned BI Engine data source, an Alerting panel, and dashboards.
- **Timescale** is required to store configuration, events, rules, etc.
- **BI Engine** has a service account key to access Grafana HTTP APIs. It evaluates alert rules and calls webhooks when alert statuses change.
- **JSON webhook** is a webhook example based on NodeJS, which accepts alert payload and saves it to the files for testing purposes.
- **Prometheus** collects and store performance metrics from BI Engine.

<Code
  url="https://github.com/VolkovLabs/volkovlabs-bi-grafana/blob/main/docker-compose.yml"
  language="yaml"
/>

### Start

When you run a docker-compose file, it launches the Grafana, Timescale, BI Engine, Prometheus and Webhook containers:

```
docker compose pull && docker compose up
```

### Stop

Stop and remove all containers:

```
docker compose down
```

## Release Notes

### Features / Enhancements in 1.6.0

- Update BI App and BI Engine (#11)
- [App] Update Prometheus dashboard.
- [App] Make repeated variable is multi and add all option.
- [App] Add Group Statuses.
- [Engine] Add execution batching.
- [Engine] Add running migrations only via server app.
- [Engine] Skip creating annotations for repeat variables without results.
- [Engine] Update Production scripts.

### Features / Enhancements in 1.5.0

- [App] Add Prometheus dashboard.
- [App] Add showing load variables error.
- [App] Add check for creating alerts without variable values.
- [App] Update to Grafana Utils 1.2.0.
- [Engine] Create mapper service to convert entities.
- [Engine] Add Prometheus middleware.
- [Engine] Add failing load variables request if unable to query variable options.
- [Engine] Add redirect support for Home dashboard.
- [Engine] Add prometheus datasource for getting variable options.
- [Engine] Update the License Key.
- [Engine] Update to Node 20.

### Features / Enhancements in 1.4.0

- Update BI App and BI Engine (#10)
- [App] Add Variables support.
- [App] Add Grafana proxy requests.
- [App] Update Dashboard annotation modes.
- [App] Add License Info tab.
- [App] Add Evaluation overrides.
- [Engine] Add Alert State to created Annotations.
- [Engine] Add Variables support.
- [Engine] Modules refactoring.
- [Engine] Add Grafana proxy for App requests.
- [Engine] Update alert checksum.
- [Engine] Update Dashboard annotations.
- [Engine] Add Configurable grafana request timeout.
- [Engine] Add License Info.
- [Engine] Add Alert history.
- [Engine] Add Evaluation overrides.

## Feedback

We're looking forward to hearing from you. You can use different ways to get in touch with us.

- Ask a question, request a new feature, or report an issue at [GitHub issues](https://github.com/volkovlabs/volkovlabs-bi-grafana/issues).
- Subscribe to our [YouTube Channel](https://www.youtube.com/@volkovlabs) and leave your comments.
- Support our project by starring the repository.
